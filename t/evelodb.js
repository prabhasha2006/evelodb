function _0x4ae2(_0x34c595,_0x48f0b8){const _0x27845b=_0x2784();return _0x4ae2=function(_0x4ae2a5,_0x3a59f8){_0x4ae2a5=_0x4ae2a5-0x81;let _0x378112=_0x27845b[_0x4ae2a5];return _0x378112;},_0x4ae2(_0x34c595,_0x48f0b8);}const _0x415236=_0x4ae2;(function(_0x3cb90e,_0x49e470){const _0x1bbf3b=_0x4ae2,_0x37966d=_0x3cb90e();while(!![]){try{const _0xa5f505=-parseInt(_0x1bbf3b(0xb6))/0x1+parseInt(_0x1bbf3b(0x99))/0x2+-parseInt(_0x1bbf3b(0x89))/0x3*(-parseInt(_0x1bbf3b(0x9f))/0x4)+parseInt(_0x1bbf3b(0x14c))/0x5*(-parseInt(_0x1bbf3b(0x148))/0x6)+-parseInt(_0x1bbf3b(0x159))/0x7*(-parseInt(_0x1bbf3b(0xb9))/0x8)+-parseInt(_0x1bbf3b(0x143))/0x9*(-parseInt(_0x1bbf3b(0xf1))/0xa)+parseInt(_0x1bbf3b(0x9b))/0xb*(parseInt(_0x1bbf3b(0x120))/0xc);if(_0xa5f505===_0x49e470)break;else _0x37966d['push'](_0x37966d['shift']());}catch(_0x3fa740){_0x37966d['push'](_0x37966d['shift']());}}}(_0x2784,0x88d5d));function _0x2784(){const _0x15dd56=['quality','1400973oGvaDu','getFilePath','noRepeat','Failed\x20to\x20write\x20file:\x20','readFileData','\x20files\x20including\x20chunks','decodeData','cleanupChunkFiles','conditions\x20required!','mkdirSync','__id','toUpperCase','deserialize','69cScOsB','forEach','all','autoPrimaryKey','ERR_OUT_OF_RANGE','Deleted\x20','allFiles','isBuffer','NO_MATCH','Edit\x20would\x20create\x20duplicate\x20data\x20(noRepeat\x20enabled)','Query\x20is\x20required','collection\x20required!','Valid\x20data\x20object\x20required','insertNonFull','inject','existsSync','837394Buuwta','Encryption\x20key\x20required\x20when\x20encryption\x20is\x20enabled','62106dyULhA','readFileSync','every','writeFileSync','3260UYcmnD','Single\x20item\x20exceeds\x20maximum\x20size\x20(','keys','lastIndexOf','getChunkFileName','children','random','Failed\x20to\x20write\x20chunk\x20','readFile','.gif','Data\x20must\x20be\x20a\x20Buffer','writeFile','Invalid\x20collection\x20data\x20format','$lte','sort','Deleted\x20chunk\x20file:\x20','get','\x20bytes)','btree','brightness','getSafeBsonSize','indexes','Invalid\x20file\x20name.\x20Avoid\x20special\x20characters.','905401EaSTMS','toLowerCase','object','8gEXNmc','create','Conditions\x20required','.jfif','edit','_id','encrypt','readData','No\x20matching\x20records\x20found','.ico','data','$in','Not\x20a\x20valid\x20image\x20file','generateContent','upToDown','Failed\x20to\x20process\x20image:\x20','code','Collection\x20not\x20found','decrypt','size','Failed\x20to\x20read\x20main\x20file\x20','maxWidth','slice','root','encode','/files','toString','objectId','reset','token','.avif','tabspace','Invalid\x20collection\x20name.\x20Avoid\x20special\x20characters\x20and\x20spaces.','invert','./evelodatabase','getAllFromBTree','bson','\x0a\x0a\x20\x20\x20\x20Important\x20Rules:\x0a\x20\x20\x20\x201.\x20Only\x20return\x20valid\x20JSON\x20in\x20the\x20specified\x20format\x0a\x20\x20\x20\x202.\x20\x22indexes\x22\x20must\x20be\x20array\x20of\x20numbers\x20matching\x20data\x20array\x20indices\x0a\x20\x20\x20\x203.\x20\x22reason\x22\x20should\x20explain\x20your\x20selection\x20logic\x0a\x20\x20\x20\x204.\x20Keep\x20the\x20response\x20concise\x20but\x20meaningful\x0a\x20\x20\x20\x20','some','mirror','length','\x0a\x20\x20\x20\x20Analyze\x20the\x20following\x20data\x20array\x20according\x20to\x20the\x20specified\x20conditions.\x0a\x20\x20\x20\x20Return\x20a\x20JSON\x20response\x20with\x20the\x20exact\x20structure\x20shown\x20in\x20the\x20example.\x0a\x0a\x20\x20\x20\x20Example\x20Response\x20Format:\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22indexes\x22:\x20[0,\x202,\x203],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22reason\x22:\x20\x22These\x20items\x20match\x20the\x20criteria\x20because...\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22message\x22:\x20\x22Additional\x20insights\x20about\x20the\x20selection\x22\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20Data\x20to\x20Analyze:\x0a\x20\x20\x20\x20','substring','pixels','matchesConditions','statSync','$gte','Duplicate\x20data\x20-\x20record\x20already\x20exists\x20(noRepeat\x20enabled)','Failed\x20to\x20decode\x20data:\x20','concat','totalSize','message','check','round','./encryption','out\x20of\x20range','60WYBcPL','basename','string','$regex','.jpg','\x0a\x0a\x20\x20\x20\x20Conditions:\x0a\x20\x20\x20\x20','stringify','hasOversizedItems','encryption','AI\x20Analysis\x20Error:','usesJsonFallback','drop','readdirSync','.bmp','-character\x20hex\x20key\x20(','Data\x20required','),\x20storing\x20separately','Failed\x20to\x20remove\x20chunk\x20file\x20','splitChild','getFileChunkInfo','order','splice','log','max','search','\x20>\x20','find','encodeData','Data\x20must\x20be\x20an\x20array','entries','DUPLICATE_DATA','extname','.svg','returnBase64','Failed\x20to\x20convert\x20','$ne','No\x20files\x20found\x20to\x20delete','push','isLeaf','No\x20matching\x20data\x20found','json','/files/','PROCESSING_ERROR','changeConfig','Cannot\x20specify\x20collection\x20when\x20data\x20is\x20provided','directory','isChunked','2148LpdLWZ','config','Failed\x20to\x20process\x20AI\x20response','hasOwnProperty','parse','Cleaned\x20up\x20leftover\x20chunk:\x20','map','unlinkSync','.heic','traverse','BSON\x20serialization\x20failed,\x20falling\x20back\x20to\x20JSON\x20for\x20large\x20object','insert','encryptionKey','generateUniqueId','serialize','findOne','text','includes','deleteFile','Cannot\x20change\x20encryption\x20settings\x20while\x20encoding\x20is\x20not\x20JSON','$lt','Unsupported\x20encryption\x20algorithm:\x20','data\x20required!','analyse','isArray','filter','Failed\x20to\x20delete\x20chunk\x20file\x20','Single\x20file\x20storage\x20failed,\x20proceeding\x20with\x20chunking','File\x20not\x20found','\x20chunks','count','min','Model\x20is\x20required','path','replace','366741xDGkVn','splitFilePath','.png','join','blackAndWhite','2560986bnRBOp','Image\x20processing\x20error:','Invalid\x20response\x20format:\x20missing\x20indexes\x20array','extension','5YoAGKj','error','warn','readImage','rmdirSync','$nin','File\x20name\x20required','delete','writeFileData','from','utf8','Files\x20not\x20found'];_0x2784=function(){return _0x15dd56;};return _0x2784();}const fs=require('fs'),{encrypt,decrypt,generateKey}=require('./encryption'),{BSON,ObjectId}=require(_0x415236(0xdd)),{GoogleGenAI}=require('@google/genai'),imageProcess=require('./imageProcess'),path=require(_0x415236(0x141)),defaultConfig={'directory':_0x415236(0xdb),'extension':'json','tabspace':0x3,'encode':_0x415236(0x119),'encryption':null,'encryptionKey':null,'noRepeat':![],'autoPrimaryKey':!![],'objectId':![]};function deepCompare(_0x2cee0a,_0x129dbc){const _0x1bb43e=_0x415236;if(typeof _0x2cee0a===_0x1bb43e(0xb8)&&typeof _0x129dbc===_0x1bb43e(0xb8)){if(Array['isArray'](_0x2cee0a)){if(!Array[_0x1bb43e(0x138)](_0x129dbc))return![];if(_0x2cee0a[_0x1bb43e(0xe1)]!==_0x129dbc['length'])return![];for(let _0xdc8a33=0x0;_0xdc8a33<_0x2cee0a[_0x1bb43e(0xe1)];_0xdc8a33++){if(!deepCompare(_0x2cee0a[_0xdc8a33],_0x129dbc[_0xdc8a33]))return![];}return!![];}else{const _0x4b7d2a=Object['keys'](_0x2cee0a),_0x472c49=Object['keys'](_0x129dbc);if(_0x4b7d2a[_0x1bb43e(0xe1)]!==_0x472c49['length'])return![];for(let _0x338ea9 of _0x4b7d2a){if(!deepCompare(_0x2cee0a[_0x338ea9],_0x129dbc[_0x338ea9]))return![];}return!![];}}else return _0x2cee0a===_0x129dbc;}class BTreeNode{constructor(_0x227790){const _0x1b2d7c=_0x415236;this[_0x1b2d7c(0xa1)]=[],this[_0x1b2d7c(0xa4)]=[],this[_0x1b2d7c(0x117)]=_0x227790;}}class BTree{constructor(_0x31e34a){const _0xa6d17d=_0x415236;this['order']=_0x31e34a,this[_0xa6d17d(0xd0)]=new BTreeNode(!![]);}['insert'](_0xe51781,_0x49c91d){const _0x3f0625=_0x415236;let _0x3f2ae=this[_0x3f0625(0xd0)];if(_0x3f2ae[_0x3f0625(0xa1)]['length']===this[_0x3f0625(0x105)]-0x1){let _0x2fbd30=new BTreeNode(![]);_0x2fbd30[_0x3f0625(0xa4)][_0x3f0625(0x116)](_0x3f2ae),this['splitChild'](_0x2fbd30,0x0),this['root']=_0x2fbd30;}this['insertNonFull'](this['root'],[_0xe51781,_0x49c91d]);}[_0x415236(0x96)](_0x52367d,_0xdd231d){const _0x197b02=_0x415236;let _0x15a702=_0x52367d[_0x197b02(0xa1)][_0x197b02(0xe1)]-0x1;if(_0x52367d[_0x197b02(0x117)]){_0x52367d['keys'][_0x197b02(0x116)](null);while(_0x15a702>=0x0&&_0xdd231d[0x0]<_0x52367d[_0x197b02(0xa1)][_0x15a702][0x0]){_0x52367d[_0x197b02(0xa1)][_0x15a702+0x1]=_0x52367d['keys'][_0x15a702],_0x15a702--;}_0x52367d[_0x197b02(0xa1)][_0x15a702+0x1]=_0xdd231d;}else{while(_0x15a702>=0x0&&_0xdd231d[0x0]<_0x52367d['keys'][_0x15a702][0x0]){_0x15a702--;}_0x15a702++,_0x52367d[_0x197b02(0xa4)][_0x15a702][_0x197b02(0xa1)][_0x197b02(0xe1)]===this['order']-0x1&&(this[_0x197b02(0x103)](_0x52367d,_0x15a702),_0xdd231d[0x0]>_0x52367d[_0x197b02(0xa1)][_0x15a702][0x0]&&_0x15a702++),this[_0x197b02(0x96)](_0x52367d['children'][_0x15a702],_0xdd231d);}}[_0x415236(0x103)](_0x5de08c,_0x5d625d){const _0x370dca=_0x415236;let _0x3a6698=this[_0x370dca(0x105)],_0x379fa7=_0x5de08c[_0x370dca(0xa4)][_0x5d625d],_0x50b40d=new BTreeNode(_0x379fa7[_0x370dca(0x117)]);_0x5de08c[_0x370dca(0xa1)]['splice'](_0x5d625d,0x0,_0x379fa7[_0x370dca(0xa1)][Math['floor'](_0x3a6698/0x2)]),_0x5de08c['children'][_0x370dca(0x106)](_0x5d625d+0x1,0x0,_0x50b40d),_0x50b40d[_0x370dca(0xa1)]=_0x379fa7[_0x370dca(0xa1)][_0x370dca(0x106)](Math['floor'](_0x3a6698/0x2)+0x1),!_0x379fa7['isLeaf']&&(_0x50b40d[_0x370dca(0xa4)]=_0x379fa7['children'][_0x370dca(0x106)](Math['floor'](_0x3a6698/0x2)+0x1));}[_0x415236(0x129)](_0x4e177a){const _0xd1163c=_0x415236;let _0x27028d=[];for(let _0x4677ab=0x0;_0x4677ab<_0x4e177a[_0xd1163c(0xa1)][_0xd1163c(0xe1)];_0x4677ab++){!_0x4e177a[_0xd1163c(0x117)]&&(_0x27028d=_0x27028d[_0xd1163c(0xea)](this[_0xd1163c(0x129)](_0x4e177a[_0xd1163c(0xa4)][_0x4677ab]))),_0x27028d[_0xd1163c(0x116)](_0x4e177a[_0xd1163c(0xa1)][_0x4677ab][0x1]);}return!_0x4e177a['isLeaf']&&_0x4e177a[_0xd1163c(0xa4)][_0xd1163c(0xe1)]>_0x4e177a['keys'][_0xd1163c(0xe1)]&&(_0x27028d=_0x27028d[_0xd1163c(0xea)](this['traverse'](_0x4e177a[_0xd1163c(0xa4)][_0x4e177a[_0xd1163c(0xa1)][_0xd1163c(0xe1)]]))),_0x27028d;}}class QueryResult{constructor(_0x4a82f9){const _0xbd5b2f=_0x415236;this[_0xbd5b2f(0xc3)]=Array[_0xbd5b2f(0x138)](_0x4a82f9)?_0x4a82f9:[];}['getList'](_0x55507a=0x0,_0xafacba=0xa){const _0x50df9c=_0x415236;return this[_0x50df9c(0xc3)][_0x50df9c(0xcf)](_0x55507a,_0x55507a+_0xafacba);}['count'](){const _0x33227d=_0x415236;return this['data'][_0x33227d(0xe1)];}[_0x415236(0xad)](_0x13f5e4){const _0xc4dee4=_0x415236;return new QueryResult([...this[_0xc4dee4(0xc3)]]['sort'](_0x13f5e4));}['all'](){return this['data'];}}class eveloDB{constructor(_0x23a871={}){const _0xaef2a9=_0x415236;this['config']={...defaultConfig,..._0x23a871};if(this[_0xaef2a9(0x121)][_0xaef2a9(0xd1)]==='bson'&&this[_0xaef2a9(0x121)][_0xaef2a9(0xf9)]&&this['config']['encryptionKey'])throw new Error('BSON\x20encoding\x20does\x20not\x20support\x20encryption.\x20Please\x20set\x20\x22encryption\x22\x20and\x20\x22encryptionKey\x22\x20to\x20null\x20or\x20use\x20\x22json\x22\x20encoding.');this[_0xaef2a9(0x121)][_0xaef2a9(0xd1)]==='bson'&&(!_0x23a871[_0xaef2a9(0x14b)]&&(this['config']['extension']='bson'),this[_0xaef2a9(0x121)]['tabspace']=0x0,this[_0xaef2a9(0x121)][_0xaef2a9(0xf9)]=null,this['config']['encryptionKey']=null);if(this[_0xaef2a9(0x121)][_0xaef2a9(0xf9)]){const _0x29aefa=this[_0xaef2a9(0x121)][_0xaef2a9(0x12c)],_0x42b101=this[_0xaef2a9(0x121)]['encryption'];if(!_0x29aefa)throw new Error(_0xaef2a9(0x9a));const _0x23197d={'aes-128-cbc':0x20,'aes-192-cbc':0x30,'aes-256-cbc':0x40,'aes-128-gcm':0x20,'aes-256-gcm':0x40},_0x189e46=_0x23197d[_0x42b101];if(!_0x189e46)throw new Error(_0xaef2a9(0x135)+_0x42b101);if(_0x29aefa['length']!==_0x189e46)throw new Error(_0x42b101[_0xaef2a9(0x87)]()+'\x20requires\x20a\x20'+_0x189e46+_0xaef2a9(0xff)+_0x189e46/0x2+_0xaef2a9(0xb0));}this['btree']=new BTree(0x3),!fs[_0xaef2a9(0x98)](this[_0xaef2a9(0x121)][_0xaef2a9(0x11e)])&&fs[_0xaef2a9(0x85)](this[_0xaef2a9(0x121)]['directory'],{'recursive':!![]});}[_0x415236(0xbf)](_0x308309){const _0x4b32e4=_0x415236;if(this['config'][_0x4b32e4(0xd1)]===_0x4b32e4(0xdd))return _0x308309;return encrypt(_0x308309,this[_0x4b32e4(0x121)][_0x4b32e4(0xf9)],this[_0x4b32e4(0x121)]['encryptionKey']);}['decrypt'](_0x2497b0){const _0x1221d1=_0x415236;if(this[_0x1221d1(0x121)][_0x1221d1(0xd1)]===_0x1221d1(0xdd))return _0x2497b0;return decrypt(_0x2497b0,this[_0x1221d1(0x121)][_0x1221d1(0xf9)],this['config'][_0x1221d1(0x12c)]);}[_0x415236(0x10c)](_0x3c838a){const _0x20671b=_0x415236;if(this[_0x20671b(0x121)][_0x20671b(0xd1)]===_0x20671b(0xdd))try{const _0x550117={'db':_0x3c838a};return BSON[_0x20671b(0x12e)](_0x550117);}catch(_0x5284c8){if(_0x5284c8['code']===_0x20671b(0x8d)||_0x5284c8[_0x20671b(0xec)]['includes'](_0x20671b(0xf0)))return console[_0x20671b(0x14e)](_0x20671b(0x12a)),JSON[_0x20671b(0xf7)](_0x3c838a,null,this[_0x20671b(0x121)][_0x20671b(0xd8)]);throw _0x5284c8;}if(this['config'][_0x20671b(0xd1)]===_0x20671b(0x119))return JSON[_0x20671b(0xf7)](_0x3c838a,null,this[_0x20671b(0x121)][_0x20671b(0xd8)]);return JSON['stringify'](_0x3c838a,null,this[_0x20671b(0x121)][_0x20671b(0xd8)]);}[_0x415236(0x82)](_0x43fc88){const _0x2729ea=_0x415236;if(this[_0x2729ea(0x121)][_0x2729ea(0xd1)]===_0x2729ea(0xdd))try{const {db:_0x2b9102}=BSON[_0x2729ea(0x88)](_0x43fc88);return _0x2b9102;}catch(_0x5b435c){try{return JSON[_0x2729ea(0x124)](_0x43fc88[_0x2729ea(0xd3)](_0x2729ea(0x156)));}catch(_0x311c77){throw new Error(_0x2729ea(0xe9)+_0x5b435c[_0x2729ea(0xec)]+',\x20'+_0x311c77[_0x2729ea(0xec)]);}}if(this[_0x2729ea(0x121)]['encode']===_0x2729ea(0x119))return JSON[_0x2729ea(0x124)](_0x43fc88[_0x2729ea(0xd3)](_0x2729ea(0x156)));return JSON[_0x2729ea(0x124)](_0x43fc88[_0x2729ea(0xd3)]('utf8'));}['getSafeBsonSize'](_0x5152d9){const _0x56ddb=_0x415236;if(this[_0x56ddb(0x121)][_0x56ddb(0xd1)]!==_0x56ddb(0xdd))return Buffer[_0x56ddb(0x155)](JSON[_0x56ddb(0xf7)](_0x5152d9))[_0x56ddb(0xe1)];try{const _0x494952={'db':_0x5152d9};return BSON[_0x56ddb(0x12e)](_0x494952)[_0x56ddb(0xe1)];}catch(_0x4941a8){if(_0x4941a8[_0x56ddb(0xc9)]===_0x56ddb(0x8d)||_0x4941a8[_0x56ddb(0xec)][_0x56ddb(0x131)](_0x56ddb(0xf0)))return Buffer[_0x56ddb(0x155)](JSON['stringify'](_0x5152d9))[_0x56ddb(0xe1)];throw _0x4941a8;}}[_0x415236(0x144)](_0x40c3b2){const _0x1f8193=_0x415236,_0x5445a5=_0x40c3b2[_0x1f8193(0xa2)]('.');if(_0x5445a5===-0x1)return{'name':_0x40c3b2,'extension':''};return{'name':_0x40c3b2['substring'](0x0,_0x5445a5),'extension':_0x40c3b2['substring'](_0x5445a5)};}['getChunkFileName'](_0x2a118f,_0x170495){const {name:_0x2cb2cb,extension:_0x1e471b}=this['splitFilePath'](_0x2a118f);if(_0x170495===0x0)return _0x2a118f;return _0x2cb2cb+'\x20'+_0x170495+_0x1e471b;}[_0x415236(0x154)](_0x28b4ac,_0x3ee8ac){const _0x56fed7=_0x415236;if(this['config'][_0x56fed7(0xd1)]!==_0x56fed7(0xdd)||!Array[_0x56fed7(0x138)](_0x3ee8ac)){const _0x2b80ca=this['config']['encryption']?this[_0x56fed7(0xbf)](_0x3ee8ac):this[_0x56fed7(0x10c)](_0x3ee8ac);return fs['writeFileSync'](_0x28b4ac,_0x2b80ca),this[_0x56fed7(0x83)](_0x28b4ac),!![];}if(!Array[_0x56fed7(0x138)](_0x3ee8ac)){const _0x65c236=this[_0x56fed7(0x121)][_0x56fed7(0xf9)]?this['encrypt'](_0x3ee8ac):this[_0x56fed7(0x10c)](_0x3ee8ac);return fs[_0x56fed7(0x9e)](_0x28b4ac,_0x65c236),this['cleanupChunkFiles'](_0x28b4ac),!![];}const _0x3410cd=0x989680,_0xcadfe6=this[_0x56fed7(0xb3)](_0x3ee8ac);if(_0xcadfe6<=_0x3410cd)try{const _0x4e7d81=this[_0x56fed7(0x121)]['encryption']?this[_0x56fed7(0xbf)](_0x3ee8ac):this[_0x56fed7(0x10c)](_0x3ee8ac);return fs[_0x56fed7(0x9e)](_0x28b4ac,_0x4e7d81),this['cleanupChunkFiles'](_0x28b4ac),!![];}catch(_0x3dd777){if(_0x3dd777[_0x56fed7(0xc9)]==='ERR_OUT_OF_RANGE'||_0x3dd777[_0x56fed7(0xec)]['includes'](_0x56fed7(0xf0)))console['warn'](_0x56fed7(0x13b));else throw _0x3dd777;}const _0x2f4c82=[];let _0x4baaaf=[],_0x47ff6b=0x0;for(const _0x4d5185 of _0x3ee8ac){const _0x507f2a=this['getSafeBsonSize']([_0x4d5185]);if(_0x507f2a>_0x3410cd){console[_0x56fed7(0x14e)](_0x56fed7(0xa0)+_0x507f2a+_0x56fed7(0x10a)+_0x3410cd+_0x56fed7(0x101));_0x4baaaf['length']>0x0&&(_0x2f4c82[_0x56fed7(0x116)]([..._0x4baaaf]),_0x4baaaf=[],_0x47ff6b=0x0);_0x2f4c82[_0x56fed7(0x116)]([_0x4d5185]);continue;}_0x47ff6b+_0x507f2a>_0x3410cd&&_0x4baaaf[_0x56fed7(0xe1)]>0x0?(_0x2f4c82[_0x56fed7(0x116)]([..._0x4baaaf]),_0x4baaaf=[_0x4d5185],_0x47ff6b=_0x507f2a):(_0x4baaaf[_0x56fed7(0x116)](_0x4d5185),_0x47ff6b+=_0x507f2a);}_0x4baaaf[_0x56fed7(0xe1)]>0x0&&_0x2f4c82['push'](_0x4baaaf);console['log']('Splitting\x20data\x20into\x20'+_0x2f4c82[_0x56fed7(0xe1)]+_0x56fed7(0x13d));for(let _0x4535de=0x0;_0x4535de<_0x2f4c82[_0x56fed7(0xe1)];_0x4535de++){const _0x2790c7=this[_0x56fed7(0xa3)](_0x28b4ac,_0x4535de);try{const _0x82f903=this[_0x56fed7(0x121)]['encryption']?this[_0x56fed7(0xbf)](_0x2f4c82[_0x4535de]):this[_0x56fed7(0x10c)](_0x2f4c82[_0x4535de]);fs['writeFileSync'](_0x2790c7,_0x82f903);}catch(_0x100dfd){console['error'](_0x56fed7(0xa6)+_0x4535de+':',_0x100dfd);if(_0x2f4c82[_0x4535de][_0x56fed7(0xe1)]>0x1)console[_0x56fed7(0x14e)]('Retrying\x20with\x20smaller\x20chunk\x20size'),this[_0x56fed7(0x154)](_0x2790c7,_0x2f4c82[_0x4535de]);else throw new Error('Failed\x20to\x20store\x20oversized\x20item:\x20'+_0x100dfd[_0x56fed7(0xec)]);}}return this[_0x56fed7(0x83)](_0x28b4ac,_0x2f4c82['length']),!![];}['cleanupChunkFiles'](_0x1984fd,_0x2d4f34=0x1){const _0x2badb1=_0x415236;let _0x44a6c3=_0x2d4f34;while(!![]){const _0x3d1b48=this[_0x2badb1(0xa3)](_0x1984fd,_0x44a6c3);if(fs[_0x2badb1(0x98)](_0x3d1b48)){try{fs[_0x2badb1(0x127)](_0x3d1b48),console[_0x2badb1(0x107)](_0x2badb1(0x125)+_0x3d1b48);}catch(_0x1bd22f){console[_0x2badb1(0x14e)](_0x2badb1(0x102)+_0x3d1b48+':',_0x1bd22f);}_0x44a6c3++;}else break;}}[_0x415236(0x15d)](_0x258e4b){const _0x5a6681=_0x415236;if(!fs[_0x5a6681(0x98)](_0x258e4b))return null;let _0x129b89;try{_0x129b89=this[_0x5a6681(0x121)][_0x5a6681(0xd1)]===_0x5a6681(0xdd)?fs['readFileSync'](_0x258e4b):fs[_0x5a6681(0x9c)](_0x258e4b,_0x5a6681(0x156));}catch(_0x5cd108){return console[_0x5a6681(0x14d)](_0x5a6681(0xcd)+_0x258e4b+':',_0x5cd108),null;}let _0x13c48b;try{_0x13c48b=this[_0x5a6681(0x121)][_0x5a6681(0xf9)]?this['decrypt'](_0x129b89):this[_0x5a6681(0x82)](_0x129b89);}catch(_0x40982e){return console[_0x5a6681(0x14d)]('Failed\x20to\x20decode\x20main\x20file\x20'+_0x258e4b+':',_0x40982e),null;}if(!Array[_0x5a6681(0x138)](_0x13c48b))return _0x13c48b;const _0x21e733=[..._0x13c48b];let _0x2bb47b=0x1;while(!![]){const _0x729817=this['getChunkFileName'](_0x258e4b,_0x2bb47b);if(!fs[_0x5a6681(0x98)](_0x729817))break;try{const _0x34bcd7=this[_0x5a6681(0x121)][_0x5a6681(0xd1)]===_0x5a6681(0xdd)?fs[_0x5a6681(0x9c)](_0x729817):fs['readFileSync'](_0x729817,_0x5a6681(0x156)),_0x49b78e=this['config'][_0x5a6681(0xf9)]?this[_0x5a6681(0xcb)](_0x34bcd7):this['decodeData'](_0x34bcd7);Array[_0x5a6681(0x138)](_0x49b78e)&&_0x21e733['push'](..._0x49b78e),_0x2bb47b++;}catch(_0x2c95e9){console[_0x5a6681(0x14e)]('Error\x20reading\x20chunk\x20file\x20'+_0x729817+':',_0x2c95e9);break;}}return _0x21e733;}[_0x415236(0x104)](_0x2c64e3){const _0xa615e4=_0x415236;if(!fs[_0xa615e4(0x98)](_0x2c64e3))return null;const _0x5a7812={'isChunked':![],'chunkCount':0x1,'totalSize':0x0,'chunkFiles':[_0x2c64e3],'hasOversizedItems':![]};try{const _0x5d7dfe=fs['statSync'](_0x2c64e3);_0x5a7812[_0xa615e4(0xeb)]=_0x5d7dfe[_0xa615e4(0xcc)];if(this[_0xa615e4(0x121)]['encode']==='bson'){const _0x2bd334=fs[_0xa615e4(0x9c)](_0x2c64e3);try{BSON[_0xa615e4(0x88)](_0x2bd334);}catch(_0x37af92){_0x5a7812[_0xa615e4(0xfb)]=!![];}}}catch(_0x2f4508){console[_0xa615e4(0x14e)]('Error\x20getting\x20stats\x20for\x20'+_0x2c64e3+':',_0x2f4508);}let _0x5c33db=0x1;while(!![]){const _0x1cc898=this[_0xa615e4(0xa3)](_0x2c64e3,_0x5c33db);if(fs[_0xa615e4(0x98)](_0x1cc898)){_0x5a7812[_0xa615e4(0x11f)]=!![],_0x5a7812['chunkCount']++,_0x5a7812['chunkFiles'][_0xa615e4(0x116)](_0x1cc898);try{const _0x2f0c90=fs[_0xa615e4(0xe6)](_0x1cc898);_0x5a7812[_0xa615e4(0xeb)]+=_0x2f0c90['size'],_0x2f0c90['size']>0x989680&&(_0x5a7812[_0xa615e4(0xf8)]=!![]);}catch(_0x5e1659){console[_0xa615e4(0x14e)]('Error\x20getting\x20stats\x20for\x20'+_0x1cc898+':',_0x5e1659);}_0x5c33db++;}else break;}return _0x5a7812;}['generateKey'](_0x250578){return generateKey(_0x250578);}[_0x415236(0x15a)](_0x162f0a){const _0x1cacab=_0x415236;return this[_0x1cacab(0x121)]['directory']+'/'+_0x162f0a+'.'+this[_0x1cacab(0x121)][_0x1cacab(0x14b)];}[_0x415236(0xba)](_0x239bf3,_0x3a8277){const _0x5daba2=_0x415236;if(!_0x239bf3)return{'err':'Collection\x20name\x20required'};if(_0x239bf3[_0x5daba2(0x131)]('/')||_0x239bf3[_0x5daba2(0x131)]('\x5c')||_0x239bf3[_0x5daba2(0x131)]('.')||_0x239bf3[_0x5daba2(0x131)]('\x20'))return{'err':_0x5daba2(0xd9)};if(!_0x3a8277||typeof _0x3a8277!==_0x5daba2(0xb8))return{'err':_0x5daba2(0x95)};const _0x17eda6=this[_0x5daba2(0x15a)](_0x239bf3);let _0x138472=[];if(fs['existsSync'](_0x17eda6)){_0x138472=this[_0x5daba2(0x15d)](_0x17eda6);if(this['config'][_0x5daba2(0x15b)]){const _0x3ffe52=_0x138472[_0x5daba2(0xdf)](_0x1b1871=>{const _0x517e07=_0x5daba2;return Object[_0x517e07(0xa1)](_0x3a8277)[_0x517e07(0x9d)](_0xe84d88=>{const _0x34b22f=_0x517e07;if(_0xe84d88===_0x34b22f(0x86))return!![];return deepCompare(_0x1b1871[_0xe84d88],_0x3a8277[_0xe84d88]);})&&Object[_0x517e07(0xa1)](_0x3a8277)[_0x517e07(0x9d)](_0x3678ea=>_0x3678ea in _0x1b1871);});if(_0x3ffe52)return{'err':_0x5daba2(0xe8),'code':'DUPLICATE_DATA'};}}const _0x3074f4={..._0x3a8277};let _0x4d7ef4;return this[_0x5daba2(0x121)][_0x5daba2(0x8c)]&&(_0x4d7ef4=typeof this[_0x5daba2(0x121)][_0x5daba2(0x8c)]===_0x5daba2(0xf3)&&this[_0x5daba2(0x121)]['autoPrimaryKey']['length']>0x0?this[_0x5daba2(0x121)][_0x5daba2(0x8c)]:_0x5daba2(0xbe),!_0x3074f4[_0x5daba2(0x123)](_0x4d7ef4)&&(_0x3074f4[_0x4d7ef4]=this[_0x5daba2(0x12d)]())),_0x138472[_0x5daba2(0x116)](_0x3074f4),this[_0x5daba2(0x154)](_0x17eda6,_0x138472),_0x3074f4[_0x5daba2(0xd6)]&&this[_0x5daba2(0xb1)][_0x5daba2(0x12b)](_0x3074f4[_0x5daba2(0xd6)],_0x3074f4),{'success':!![],..._0x4d7ef4&&_0x3074f4[_0x4d7ef4]?{[_0x4d7ef4]:_0x3074f4[_0x4d7ef4]}:{}};}[_0x415236(0x153)](_0x2afac1,_0x483186){const _0x2ab49d=_0x415236;if(!_0x2afac1)return{'err':_0x2ab49d(0x94)};if(!_0x483186)return{'err':_0x2ab49d(0x84)};const _0x5be5e0=this[_0x2ab49d(0x15a)](_0x2afac1);if(!fs[_0x2ab49d(0x98)](_0x5be5e0))return{'err':0x194};let _0x4b0b4b=this['readFileData'](_0x5be5e0);const _0x1749ce=_0x4b0b4b[_0x2ab49d(0xe1)],_0x4d30d6=_0x4b0b4b[_0x2ab49d(0x139)](_0x677567=>!this[_0x2ab49d(0xe5)](_0x677567,_0x483186)),_0x5ba7c0=_0x1749ce-_0x4d30d6['length'];return this[_0x2ab49d(0x154)](_0x5be5e0,_0x4d30d6),{'success':!![],'deletedCount':_0x5ba7c0};}[_0x415236(0x97)](_0x3e0f46,_0x325bc3){const _0x42c5be=_0x415236;if(!_0x3e0f46)return{'err':'collection\x20required!'};if(!_0x325bc3)return{'err':_0x42c5be(0x136)};const _0x1be5a1=this[_0x42c5be(0x15a)](_0x3e0f46);return this[_0x42c5be(0x154)](_0x1be5a1,_0x325bc3),{'success':!![]};}['writeData'](_0x304d76,_0x42f451){const _0x4c4304=_0x415236;if(!_0x304d76)return{'err':'collection\x20required!'};if(_0x304d76[_0x4c4304(0x131)]('/')||_0x304d76[_0x4c4304(0x131)]('\x5c')||_0x304d76['includes']('.')||_0x304d76[_0x4c4304(0x131)]('\x20'))return{'err':_0x4c4304(0xd9)};if(!_0x42f451)return{'err':_0x4c4304(0x136)};const _0x2cfb67=this[_0x4c4304(0x15a)](_0x304d76);return this[_0x4c4304(0x154)](_0x2cfb67,_0x42f451),{'success':!![]};}[_0x415236(0x10b)](_0x8e13da,_0x3b91c5){const _0x2b4c60=_0x415236;if(!_0x8e13da)return{'err':'collection\x20required!'};if(!_0x3b91c5)return{'err':_0x2b4c60(0x84)};const _0x23ed59=this[_0x2b4c60(0x15a)](_0x8e13da);if(!fs[_0x2b4c60(0x98)](_0x23ed59))return new QueryResult([]);const _0x29d21c=this[_0x2b4c60(0x15d)](_0x23ed59),_0x3a25a1=_0x29d21c[_0x2b4c60(0x139)](_0x2909d4=>this[_0x2b4c60(0xe5)](_0x2909d4,_0x3b91c5));return new QueryResult(_0x3a25a1);}[_0x415236(0x12f)](_0x446aac,_0x344f40){const _0x4baa21=_0x415236;if(!_0x446aac)return{'err':_0x4baa21(0x94)};if(!_0x344f40)return{'err':_0x4baa21(0x84)};const _0x5ef871=this[_0x4baa21(0x15a)](_0x446aac);if(!fs[_0x4baa21(0x98)](_0x5ef871))return null;const _0x4a775e=this[_0x4baa21(0x15d)](_0x5ef871);return _0x4a775e[_0x4baa21(0x10b)](_0x486cd8=>this[_0x4baa21(0xe5)](_0x486cd8,_0x344f40))||null;}[_0x415236(0x109)](_0x2fb509,_0x5e6de9){const _0x46e9ab=_0x415236;if(!_0x2fb509)return{'err':'collection\x20required!'};if(!_0x5e6de9)return{'err':_0x46e9ab(0x84)};const _0x5a597f=this['getFilePath'](_0x2fb509);if(!fs[_0x46e9ab(0x98)](_0x5a597f))return new QueryResult([]);const _0x41ecb1=this[_0x46e9ab(0x15d)](_0x5a597f),_0x15be11=_0x41ecb1[_0x46e9ab(0x139)](_0x4c4280=>{const _0x14ec70=_0x46e9ab;return Object[_0x14ec70(0x10e)](_0x5e6de9)['every'](([_0x4c0fa5,_0x57aa40])=>{const _0x2409bb=_0x14ec70,_0x3bb2b0=_0x4c4280[_0x4c0fa5];if(_0x3bb2b0===undefined||_0x3bb2b0===null)return![];if(_0x57aa40&&typeof _0x57aa40==='object'&&_0x57aa40[_0x2409bb(0xf4)]){const _0x3884af=_0x57aa40['$regex'],_0x57b0e4=_0x57aa40['$options']||'i',_0x1cc5de=new RegExp(_0x3884af,_0x57b0e4);return _0x1cc5de['test'](_0x3bb2b0[_0x2409bb(0xd3)]());}return _0x3bb2b0['toString']()[_0x2409bb(0xb7)]()[_0x2409bb(0x131)](_0x57aa40[_0x2409bb(0xd3)]()[_0x2409bb(0xb7)]());});});return new QueryResult(_0x15be11);}[_0x415236(0xaf)](_0x31864a){const _0x57d1b5=_0x415236;if(!_0x31864a)return{'err':_0x57d1b5(0x94)};const _0xe5c7a4=this[_0x57d1b5(0x15a)](_0x31864a);if(!fs['existsSync'](_0xe5c7a4))return new QueryResult(undefined);const _0x3476d3=this[_0x57d1b5(0x15d)](_0xe5c7a4);return new QueryResult(_0x3476d3);}[_0x415236(0xc0)](_0x371401){const _0x474e34=_0x415236;if(!_0x371401)return{'err':_0x474e34(0x94)};const _0x11ad56=this[_0x474e34(0x15a)](_0x371401);if(!fs[_0x474e34(0x98)](_0x11ad56))return undefined;const _0x576537=this[_0x474e34(0x15d)](_0x11ad56);return _0x576537;}[_0x415236(0x13e)](_0x174622){const _0x378483=_0x415236;if(!_0x174622)return{'success':![],'err':_0x378483(0x94)};const _0x4315ab=this[_0x378483(0xaf)](_0x174622)[_0x378483(0x8b)]();if(!_0x4315ab)return{'success':![],'err':_0x378483(0xca)};if(!Array[_0x378483(0x138)](_0x4315ab))return{'success':![],'err':_0x378483(0xab)};return{'success':!![],'count':_0x4315ab[_0x378483(0xe1)]};}[_0x415236(0xed)](_0xbe8224,_0x40aac3){const _0x295746=_0x415236;if(!_0xbe8224)return{'err':_0x295746(0x94)};if(!_0x40aac3)return{'err':_0x295746(0x84)};return this[_0x295746(0x10b)](_0xbe8224,_0x40aac3)['all']()[_0x295746(0xe1)]>0x0;}[_0x415236(0xbd)](_0x3af88c,_0x1c04ad,_0x46e205){const _0x1d4a01=_0x415236;if(!_0x3af88c)return{'err':'Collection\x20name\x20required'};if(!_0x1c04ad)return{'err':_0x1d4a01(0xbb)};if(!_0x46e205)return{'err':'New\x20data\x20required'};const _0x3a00e3=this[_0x1d4a01(0x15a)](_0x3af88c);if(!fs[_0x1d4a01(0x98)](_0x3a00e3))return{'err':_0x1d4a01(0xca),'code':0x194};let _0x5a197d=this['readFileData'](_0x3a00e3),_0x4991b3=0x0,_0x3efd6=![];const _0x16469d=_0x5a197d[_0x1d4a01(0x126)](_0x7a6a15=>{const _0xdd746a=_0x1d4a01;if(this[_0xdd746a(0xe5)](_0x7a6a15,_0x1c04ad)){const _0x496f16={..._0x7a6a15,..._0x46e205};if(this[_0xdd746a(0x121)][_0xdd746a(0x15b)]){const _0x2b0446=_0x5a197d[_0xdd746a(0xdf)](_0x21ea19=>{const _0x293262=_0xdd746a;if(_0x21ea19[_0x293262(0x86)]&&_0x7a6a15[_0x293262(0x86)]&&_0x21ea19['__id']===_0x7a6a15[_0x293262(0x86)])return![];return Object[_0x293262(0xa1)](_0x46e205)['every'](_0x566f55=>{if(_0x566f55==='__id')return![];return deepCompare(_0x21ea19[_0x566f55],_0x496f16[_0x566f55]);});});if(_0x2b0446)return _0x3efd6=!![],_0x7a6a15;}return _0x4991b3++,_0x496f16;}return _0x7a6a15;});if(_0x3efd6)return{'err':_0x1d4a01(0x92),'code':_0x1d4a01(0x10f)};if(_0x4991b3===0x0)return{'err':_0x1d4a01(0xc1),'code':_0x1d4a01(0x91)};return this[_0x1d4a01(0x154)](_0x3a00e3,_0x16469d),{'success':!![],'modifiedCount':_0x4991b3};}['drop'](_0x267e46){const _0x1f9047=_0x415236;if(!_0x267e46)return{'err':_0x1f9047(0x94)};const _0x3579cc=this['getFilePath'](_0x267e46);if(this[_0x1f9047(0x121)][_0x1f9047(0xd1)]==='bson'){let _0x5ef6a9=0x0,_0x3bb36e=0x0;while(!![]){const _0x17be69=this[_0x1f9047(0xa3)](_0x3579cc,_0x3bb36e);if(fs['existsSync'](_0x17be69)){try{fs[_0x1f9047(0x127)](_0x17be69),_0x5ef6a9++,console[_0x1f9047(0x107)](_0x1f9047(0xae)+_0x17be69);}catch(_0x3de6f9){console[_0x1f9047(0x14e)](_0x1f9047(0x13a)+_0x17be69+':',_0x3de6f9);}_0x3bb36e++;}else break;}return _0x5ef6a9>0x0?{'success':!![],'deletedCount':_0x5ef6a9,'message':_0x1f9047(0x8e)+_0x5ef6a9+_0x1f9047(0x81)}:{'err':_0x1f9047(0x115),'code':0x194};}else return fs[_0x1f9047(0x98)](_0x3579cc)?(fs[_0x1f9047(0x127)](_0x3579cc),{'success':!![]}):{'err':0x194};}[_0x415236(0xd5)](_0x2ebe82){const _0x23bd29=_0x415236;return this[_0x23bd29(0xfc)](_0x2ebe82);}[_0x415236(0x11c)]({from:_0x4a417f,to:_0x1edff9,collections:_0x2268ca}){const _0x3cd1a5=_0x415236;if(this[_0x3cd1a5(0x121)]['encode']!==_0x3cd1a5(0x119)&&(_0x4a417f[_0x3cd1a5(0xf9)]||_0x4a417f[_0x3cd1a5(0x12c)]||_0x1edff9['encryption']||_0x1edff9[_0x3cd1a5(0x12c)]))throw new Error(_0x3cd1a5(0x133));const _0x188ea3=require(_0x3cd1a5(0x141)),_0x49c995=fs['readdirSync'](_0x4a417f['directory']||this[_0x3cd1a5(0x121)][_0x3cd1a5(0x11e)]),{encrypt:_0x4e5ce2,decrypt:_0x428a3a}=require(_0x3cd1a5(0xef)),_0x1da1b3={'aes-128-cbc':0x20,'aes-192-cbc':0x30,'aes-256-cbc':0x40,'aes-128-gcm':0x20,'aes-256-gcm':0x40},_0xb9fa1a=(_0x511851,_0x579507)=>{const _0x402805=_0x3cd1a5;if(!_0x579507)return;if(!_0x511851||_0x511851[_0x402805(0xe1)]!==_0x1da1b3[_0x579507])throw new Error(_0x579507+'\x20requires\x20'+_0x1da1b3[_0x579507]+'\x20hex\x20characters');};_0xb9fa1a(_0x4a417f['encryptionKey'],_0x4a417f[_0x3cd1a5(0xf9)]),_0xb9fa1a(_0x1edff9['encryptionKey'],_0x1edff9[_0x3cd1a5(0xf9)]);let _0x55c959=0x0,_0x261d69=0x0;const _0x31c3c1=_0x4a417f[_0x3cd1a5(0x14b)]||this[_0x3cd1a5(0x121)][_0x3cd1a5(0x14b)],_0x33281b=_0x1edff9[_0x3cd1a5(0x14b)]||this[_0x3cd1a5(0x121)]['extension'],_0x24f2a8=_0x4a417f[_0x3cd1a5(0x11e)]||this[_0x3cd1a5(0x121)][_0x3cd1a5(0x11e)],_0x4aaf52=_0x1edff9[_0x3cd1a5(0x11e)]||this[_0x3cd1a5(0x121)][_0x3cd1a5(0x11e)];!fs[_0x3cd1a5(0x98)](_0x4aaf52)&&fs['mkdirSync'](_0x4aaf52,{'recursive':!![]});_0x49c995[_0x3cd1a5(0x8a)](_0x51825c=>{const _0x3b084a=_0x3cd1a5,_0x436f87=_0x188ea3[_0x3b084a(0x110)](_0x51825c)[_0x3b084a(0xcf)](0x1),_0x1b6aa6=_0x188ea3[_0x3b084a(0xf2)](_0x51825c,'.'+_0x436f87);if(_0x436f87!==_0x31c3c1)return;if(_0x2268ca&&!_0x2268ca[_0x3b084a(0x131)](_0x1b6aa6))return;const _0x27586b=_0x188ea3['join'](_0x24f2a8,_0x51825c),_0xe5502d=_0x188ea3[_0x3b084a(0x146)](_0x4aaf52,_0x1b6aa6+'.'+_0x33281b);try{const _0x5b3823=fs[_0x3b084a(0x9c)](_0x27586b,_0x3b084a(0x156)),_0xd7d393=_0x4a417f[_0x3b084a(0xf9)]?_0x428a3a(_0x5b3823,_0x4a417f['encryption'],_0x4a417f[_0x3b084a(0x12c)]):JSON[_0x3b084a(0x124)](_0x5b3823),_0x42e109=_0x1edff9[_0x3b084a(0xf9)]?_0x4e5ce2(_0xd7d393,_0x1edff9[_0x3b084a(0xf9)],_0x1edff9['encryptionKey']):JSON[_0x3b084a(0xf7)](_0xd7d393,null,0x3);fs[_0x3b084a(0x9e)](_0xe5502d,_0x42e109),_0x55c959++,_0x27586b!==_0xe5502d&&fs['existsSync'](_0x27586b)&&fs[_0x3b084a(0x127)](_0x27586b);}catch(_0xccf40b){console[_0x3b084a(0x14d)](_0x3b084a(0x113)+_0x51825c+':\x20'+_0xccf40b[_0x3b084a(0xec)]),_0x261d69++;}});if(_0x24f2a8!==_0x4aaf52&&fs[_0x3cd1a5(0x98)](_0x24f2a8)){const _0x55ec75=fs[_0x3cd1a5(0xfd)](_0x24f2a8);_0x55ec75[_0x3cd1a5(0xe1)]===0x0&&fs[_0x3cd1a5(0x150)](_0x24f2a8,{'recursive':!![]});}return{'success':!![],'converted':_0x55c959,'failed':_0x261d69};}async[_0x415236(0x137)]({collection:_0x175e62,filter:_0xc319cf,data:_0x5ff036,model:_0x1aa125,apiKey:_0x36aee6,query:_0x998009}){const _0x303223=_0x415236;if(_0x5ff036&&!Array['isArray'](_0x5ff036))return{'success':![],'err':_0x303223(0x10d)};if(_0x5ff036&&_0x175e62)return{'success':![],'err':_0x303223(0x11d)};if(_0xc319cf&&typeof _0xc319cf!==_0x303223(0xb8))return{'success':![],'err':'Filter\x20must\x20be\x20an\x20object'};if(!_0x1aa125)return{'success':![],'err':_0x303223(0x140)};if(!_0x36aee6)return{'success':![],'err':'API\x20Key\x20is\x20required'};if(!_0x998009)return{'success':![],'err':_0x303223(0x93)};if(_0x998009[_0x303223(0xe1)]>0x400)return{'success':![],'err':'Query\x20exceeds\x20maximum\x20length\x20of\x201024\x20characters'};var _0x5b8816=_0x5ff036||this[_0x303223(0xaf)](_0x175e62)[_0x303223(0x8b)]();_0xc319cf&&(_0x5b8816=_0x5b8816['filter'](_0x29cbef=>this['matchesConditions'](_0x29cbef,_0xc319cf)));if(_0x5b8816[_0x303223(0xe1)]==0x0)return{'success':![],'err':_0x303223(0x118)};const _0x1be75b=new GoogleGenAI({'apiKey':_0x36aee6}),_0x412f9e=_0x303223(0xe2)+JSON[_0x303223(0xf7)](_0x5b8816,null,0x2)+_0x303223(0xf6)+_0x998009+_0x303223(0xde);try{const _0x37f804=await _0x1be75b['models'][_0x303223(0xc6)]({'model':_0x1aa125,'contents':_0x412f9e}),_0x5bcda5=_0x37f804[_0x303223(0x130)],_0x1fbf1f=_0x5bcda5[_0x303223(0x142)](/```json|```/g,'')['trim'](),_0x1a4381=JSON[_0x303223(0x124)](_0x1fbf1f);if(!_0x1a4381['indexes']||!Array[_0x303223(0x138)](_0x1a4381[_0x303223(0xb4)]))throw new Error(_0x303223(0x14a));return{'success':!![],'response':{..._0x1a4381,'data':_0x1a4381[_0x303223(0xb4)][_0x303223(0x126)](_0x135ffd=>_0x5b8816[_0x135ffd])}};}catch(_0x27e6c5){return console[_0x303223(0x14d)](_0x303223(0xfa),_0x27e6c5),{'success':![],'err':_0x27e6c5[_0x303223(0xec)]||_0x303223(0x122)};}}['rebuildBTree'](_0x45d462){const _0x2d63e5=_0x415236;if(!_0x45d462)return{'err':'collection\x20required!'};const _0x1e0df1=this['getFilePath'](_0x45d462);if(!fs['existsSync'](_0x1e0df1))return{'err':0x194};let _0x4b1a43=this['readFileData'](_0x1e0df1);this[_0x2d63e5(0xb1)]=new BTree(0x3),_0x4b1a43[_0x2d63e5(0x8a)](_0x413ee8=>{const _0x529d1a=_0x2d63e5;_0x413ee8[_0x529d1a(0xd6)]?this[_0x529d1a(0xb1)][_0x529d1a(0x12b)](_0x413ee8['token'],_0x413ee8):console[_0x529d1a(0x14d)]('Item\x20is\x20missing\x20a\x20token:',_0x413ee8);});}[_0x415236(0xe5)](_0x483e42,_0x2db59b){const _0x2d52a8=_0x415236;return Object[_0x2d52a8(0x10e)](_0x2db59b)['every'](([_0x26b14b,_0x2725f8])=>{const _0x2d5523=_0x2d52a8,_0x3a8549=_0x483e42[_0x26b14b];if(typeof _0x2725f8===_0x2d5523(0xb8)&&_0x2725f8!==null&&!Array[_0x2d5523(0x138)](_0x2725f8))return Object[_0x2d5523(0x10e)](_0x2725f8)[_0x2d5523(0x9d)](([_0x18e013,_0xa3ef7e])=>{const _0x409da9=_0x2d5523;switch(_0x18e013){case'$eq':return _0x3a8549===_0xa3ef7e;case _0x409da9(0x114):return _0x3a8549!==_0xa3ef7e;case'$gt':return _0x3a8549>_0xa3ef7e;case _0x409da9(0xe7):return _0x3a8549>=_0xa3ef7e;case _0x409da9(0x134):return _0x3a8549<_0xa3ef7e;case _0x409da9(0xac):return _0x3a8549<=_0xa3ef7e;case _0x409da9(0xc4):return Array['isArray'](_0xa3ef7e)&&_0xa3ef7e['includes'](_0x3a8549);case _0x409da9(0x151):return Array[_0x409da9(0x138)](_0xa3ef7e)&&!_0xa3ef7e[_0x409da9(0x131)](_0x3a8549);default:return![];}});return _0x3a8549===_0x2725f8;});}[_0x415236(0xdc)](){const _0x3cc709=_0x415236;return this[_0x3cc709(0xb1)][_0x3cc709(0x129)](this[_0x3cc709(0xb1)][_0x3cc709(0xd0)]);}[_0x415236(0x12d)](){const _0x3df4e5=_0x415236;if(this['config'][_0x3df4e5(0xd1)]===_0x3df4e5(0xdd)&&this[_0x3df4e5(0x121)][_0x3df4e5(0xd4)])return new ObjectId();const _0x36a747=Date['now']()['toString'](0x24),_0x4d0a90=Math[_0x3df4e5(0xa5)]()[_0x3df4e5(0xd3)](0x24)[_0x3df4e5(0xe3)](0x2,0xa);return _0x36a747+'_'+_0x4d0a90;}[_0x415236(0xaa)](_0x2f825b,_0x3bc0b3){const _0x20519f=_0x415236;if(!_0x2f825b)return{'err':'File\x20name\x20required'};if(!_0x3bc0b3)return{'err':_0x20519f(0x100)};if(_0x2f825b[_0x20519f(0x131)]('/')||_0x2f825b[_0x20519f(0x131)]('\x5c'))return{'err':_0x20519f(0xb5)};if(!Buffer[_0x20519f(0x90)](_0x3bc0b3))return{'err':_0x20519f(0xa9)};!fs[_0x20519f(0x98)](this[_0x20519f(0x121)][_0x20519f(0x11e)]+'/files')&&fs[_0x20519f(0x85)](this['config'][_0x20519f(0x11e)]+_0x20519f(0xd2),{'recursive':!![]});const _0x421bcf=this['config']['directory']+'/files/'+_0x2f825b;try{return fs['writeFileSync'](_0x421bcf,_0x3bc0b3),{'success':!![]};}catch(_0x3d3483){return{'err':_0x20519f(0x15c)+_0x3d3483[_0x20519f(0xec)]};}}[_0x415236(0x8f)](){const _0x54d73b=_0x415236;if(!fs[_0x54d73b(0x98)](this[_0x54d73b(0x121)][_0x54d73b(0x11e)]+_0x54d73b(0xd2)))return[];const _0x31c9e4=fs[_0x54d73b(0xfd)](this[_0x54d73b(0x121)]['directory']+_0x54d73b(0xd2));return _0x31c9e4;}[_0x415236(0xa7)](_0x1afee1){const _0x47e5c8=_0x415236;if(!_0x1afee1)return{'err':_0x47e5c8(0x152)};if(!fs[_0x47e5c8(0x98)](this['config']['directory']+_0x47e5c8(0xd2)))return{'err':_0x47e5c8(0x157),'code':0x194};const _0x1a3005=this['config'][_0x47e5c8(0x11e)]+_0x47e5c8(0x11a)+_0x1afee1;if(!fs[_0x47e5c8(0x98)](_0x1a3005))return{'err':'File\x20not\x20found','code':0x194};try{const _0x537c4c=fs['readFileSync'](_0x1a3005);return{'success':!![],'data':_0x537c4c};}catch(_0x5b486b){return{'err':'Failed\x20to\x20read\x20file:\x20'+_0x5b486b['message']};}}async[_0x415236(0x14f)](_0x13f847,_0x13f677={'returnBase64':!![],'quality':0x1,'pixels':0x0,'blackAndWhite':![],'mirror':![],'upToDown':![],'invert':![],'brightness':0x1,'contrast':0x1,'maxWidth':null,'maxHeight':null}){const _0x25291d=_0x415236;if(!_0x13f847)return{'err':_0x25291d(0x152)};if(_0x13f847[_0x25291d(0x131)]('/')||_0x13f847[_0x25291d(0x131)]('\x5c'))return{'err':_0x25291d(0xb5)};if(!fs[_0x25291d(0x98)](this['config'][_0x25291d(0x11e)]+_0x25291d(0xd2)))return{'err':'Files\x20directory\x20not\x20found','code':0x194};const _0x54e49b=this[_0x25291d(0x121)][_0x25291d(0x11e)]+_0x25291d(0x11a)+_0x13f847;if(!fs[_0x25291d(0x98)](_0x54e49b))return{'err':_0x25291d(0x13c),'code':0x194};const _0x16a93e=[_0x25291d(0x145),_0x25291d(0xf5),'.jpeg',_0x25291d(0xa8),_0x25291d(0xfe),'.webp','.tiff',_0x25291d(0x111),_0x25291d(0xc2),_0x25291d(0x128),_0x25291d(0xd7),_0x25291d(0xbc)],_0x563cbb=path[_0x25291d(0x110)](_0x13f847)[_0x25291d(0xb7)]();if(!_0x16a93e[_0x25291d(0x131)](_0x563cbb))return{'err':_0x25291d(0xc5)};try{const _0x30da17=fs[_0x25291d(0x9c)](_0x54e49b),_0x96982d={'returnBase64':_0x13f677[_0x25291d(0x112)]!==![],'quality':Math['max'](0.1,Math['min'](0x1,_0x13f677['quality']||0x1)),'pixels':Math[_0x25291d(0x108)](0x0,_0x13f677[_0x25291d(0xe4)]||0x0),'blackAndWhite':Boolean(_0x13f677[_0x25291d(0x147)]),'mirror':Boolean(_0x13f677['mirror']),'upToDown':Boolean(_0x13f677[_0x25291d(0xc7)]),'invert':Boolean(_0x13f677['invert']),'brightness':Math[_0x25291d(0x108)](0.1,Math[_0x25291d(0x13f)](0x5,_0x13f677[_0x25291d(0xb2)]||0x1)),'contrast':Math[_0x25291d(0x108)](0.1,Math[_0x25291d(0x13f)](0x5,_0x13f677['contrast']||0x1)),'maxWidth':_0x13f677[_0x25291d(0xce)]>0x0?Math[_0x25291d(0xee)](_0x13f677[_0x25291d(0xce)]):null,'maxHeight':_0x13f677['maxHeight']>0x0?Math[_0x25291d(0xee)](_0x13f677['maxHeight']):null},_0x510c3a=await imageProcess(_0x30da17,_0x563cbb,_0x96982d),_0x5a4773=fs[_0x25291d(0xe6)](_0x54e49b);return{'success':!![],'data':_0x510c3a,'metadata':{'filename':_0x13f847,'extension':_0x563cbb,'originalSize':_0x5a4773['size'],'processingApplied':{'resized':_0x96982d[_0x25291d(0xe4)]>0x0,'qualityReduced':_0x96982d[_0x25291d(0x158)]<0x1,'blackAndWhite':_0x96982d[_0x25291d(0x147)],'mirrored':_0x96982d[_0x25291d(0xe0)],'flippedVertical':_0x96982d[_0x25291d(0xc7)],'inverted':_0x96982d[_0x25291d(0xda)],'brightnessAdjusted':_0x96982d[_0x25291d(0xb2)]!==0x1,'contrastAdjusted':_0x96982d['contrast']!==0x1}}};}catch(_0x245348){return console['error'](_0x25291d(0x149),_0x245348),{'err':_0x25291d(0xc8)+_0x245348[_0x25291d(0xec)],'code':_0x25291d(0x11b)};}}[_0x415236(0x132)](_0x36edfa){const _0x14d14c=_0x415236;if(!_0x36edfa)return{'err':'File\x20name\x20required'};if(!fs['existsSync'](this[_0x14d14c(0x121)][_0x14d14c(0x11e)]+'/files'))return{'err':_0x14d14c(0x157),'code':0x194};const _0x158892=this[_0x14d14c(0x121)][_0x14d14c(0x11e)]+_0x14d14c(0x11a)+_0x36edfa;if(!fs[_0x14d14c(0x98)](_0x158892))return{'err':_0x14d14c(0x13c),'code':0x194};try{return fs[_0x14d14c(0x127)](_0x158892),{'success':!![]};}catch(_0x2981cd){return{'err':'Failed\x20to\x20delete\x20file:\x20'+_0x2981cd[_0x14d14c(0xec)]};}}}module['exports']=eveloDB;