const _0x34c5ae=_0x5737;function _0x4095(){const _0x11a171=['decodeData','map','includes','Duplicate\x20data\x20-\x20record\x20already\x20exists\x20(noRepeat\x20enabled)','insertNonFull','Valid\x20data\x20object\x20required','btree','trim','every','children','Collection\x20name\x20required','95504oxxFoW','Query\x20exceeds\x20maximum\x20length\x20of\x201024\x20characters','Edit\x20would\x20create\x20duplicate\x20data\x20(noRepeat\x20enabled)','DUPLICATE_DATA','readFileSync','Model\x20is\x20required','Query\x20is\x20required','basename','NO_MATCH','message','$nin','tabspace','encrypt','getFilePath','6674376NfYYXC','6NmIsYX','string','search','toUpperCase','reset','generateUniqueId','$gte','Cannot\x20change\x20encryption\x20settings\x20while\x20encoding\x20is\x20not\x20JSON','parse','data\x20required!','traverse','toLowerCase','all','Failed\x20to\x20convert\x20','writeData','189TRLBck','push','exports','Filter\x20must\x20be\x20an\x20object','unlinkSync','__id','7050015gPLgdC','Invalid\x20response\x20format:\x20missing\x20indexes\x20array','$ne','isLeaf','autoPrimaryKey','generateContent','readdirSync','4398744dyEMnb','directory','json','drop','$eq','insert','generateKey','slice','utf8','$regex','matchesConditions','config','length','filter','findOne','inject','Data\x20must\x20be\x20an\x20array','\x20requires\x20a\x20','root','13006637Vlpdme','conditions\x20required!','indexes','extension','substring','extname','decrypt','noRepeat','readData','writeFileData','No\x20matching\x20data\x20found','\x20hex\x20characters','getList','\x20bytes)','encryption','430152BSQCnn','$in','deserialize','create','floor','delete','Invalid\x20collection\x20data\x20format','splice','./evelodatabase','splitChild','27852660NDHlQO','join','encodeData','Encryption\x20key\x20required\x20when\x20encryption\x20is\x20enabled','Unsupported\x20encryption\x20algorithm:\x20','some','getAllFromBTree','data','Failed\x20to\x20process\x20AI\x20response','keys','count','error','stringify','existsSync','collection\x20required!','get','Conditions\x20required','19wvHPer','encryptionKey','text','Collection\x20not\x20found','rmdirSync','readFileData','sort','./encryption','bson','token','forEach','test','No\x20matching\x20records\x20found','isArray','$lte','$lt','toString','\x0a\x0a\x20\x20\x20\x20Important\x20Rules:\x0a\x20\x20\x20\x201.\x20Only\x20return\x20valid\x20JSON\x20in\x20the\x20specified\x20format\x0a\x20\x20\x20\x202.\x20\x22indexes\x22\x20must\x20be\x20array\x20of\x20numbers\x20matching\x20data\x20array\x20indices\x0a\x20\x20\x20\x203.\x20\x22reason\x22\x20should\x20explain\x20your\x20selection\x20logic\x0a\x20\x20\x20\x204.\x20Keep\x20the\x20response\x20concise\x20but\x20meaningful\x0a\x20\x20\x20\x20','mkdirSync','@google/genai','entries','order','encode','_id','find','AI\x20Analysis\x20Error:','replace','object'];_0x4095=function(){return _0x11a171;};return _0x4095();}(function(_0x2667c9,_0x2df661){const _0x5d519d=_0x5737,_0x585bda=_0x2667c9();while(!![]){try{const _0x472ce0=parseInt(_0x5d519d(0x1ec))/0x1*(-parseInt(_0x5d519d(0x213))/0x2)+parseInt(_0x5d519d(0x1af))/0x3+-parseInt(_0x5d519d(0x192))/0x4+-parseInt(_0x5d519d(0x1a8))/0x5+-parseInt(_0x5d519d(0x193))/0x6*(-parseInt(_0x5d519d(0x1c2))/0x7)+-parseInt(_0x5d519d(0x1d1))/0x8*(parseInt(_0x5d519d(0x1a2))/0x9)+parseInt(_0x5d519d(0x1db))/0xa;if(_0x472ce0===_0x2df661)break;else _0x585bda['push'](_0x585bda['shift']());}catch(_0x352819){_0x585bda['push'](_0x585bda['shift']());}}}(_0x4095,0xf2d0b));const fs=require('fs'),{encrypt,decrypt,generateKey}=require('./encryption'),{BSON,ObjectId}=require('bson'),{GoogleGenAI}=require(_0x34c5ae(0x1ff)),defaultConfig={'directory':_0x34c5ae(0x1d9),'extension':_0x34c5ae(0x1b1),'tabspace':0x3,'encode':_0x34c5ae(0x1b1),'encryption':null,'encryptionKey':null,'noRepeat':![],'autoPrimaryKey':!![]};function deepCompare(_0x793be4,_0x25f4ce){const _0x4ebf40=_0x34c5ae;if(typeof _0x793be4===_0x4ebf40(0x207)&&typeof _0x25f4ce===_0x4ebf40(0x207)){if(Array[_0x4ebf40(0x1f9)](_0x793be4)){if(!Array['isArray'](_0x25f4ce))return![];if(_0x793be4[_0x4ebf40(0x1bb)]!==_0x25f4ce['length'])return![];for(let _0x28dc9a=0x0;_0x28dc9a<_0x793be4['length'];_0x28dc9a++){if(!deepCompare(_0x793be4[_0x28dc9a],_0x25f4ce[_0x28dc9a]))return![];}return!![];}else{const _0x41503b=Object['keys'](_0x793be4),_0x519be0=Object[_0x4ebf40(0x1e4)](_0x25f4ce);if(_0x41503b[_0x4ebf40(0x1bb)]!==_0x519be0['length'])return![];for(let _0x543002 of _0x41503b){if(!deepCompare(_0x793be4[_0x543002],_0x25f4ce[_0x543002]))return![];}return!![];}}else return _0x793be4===_0x25f4ce;}class BTreeNode{constructor(_0x527725){const _0x6de0d2=_0x34c5ae;this[_0x6de0d2(0x1e4)]=[],this[_0x6de0d2(0x211)]=[],this[_0x6de0d2(0x1ab)]=_0x527725;}}class BTree{constructor(_0x4df333){const _0x94bd95=_0x34c5ae;this[_0x94bd95(0x201)]=_0x4df333,this[_0x94bd95(0x1c1)]=new BTreeNode(!![]);}[_0x34c5ae(0x1b4)](_0x41a36a,_0x10142a){const _0x154204=_0x34c5ae;let _0x197e49=this[_0x154204(0x1c1)];if(_0x197e49[_0x154204(0x1e4)]['length']===this[_0x154204(0x201)]-0x1){let _0xd63b16=new BTreeNode(![]);_0xd63b16[_0x154204(0x211)][_0x154204(0x1a3)](_0x197e49),this[_0x154204(0x1da)](_0xd63b16,0x0),this[_0x154204(0x1c1)]=_0xd63b16;}this[_0x154204(0x20c)](this[_0x154204(0x1c1)],[_0x41a36a,_0x10142a]);}[_0x34c5ae(0x20c)](_0x2dbb8d,_0xe18ee6){const _0x158b62=_0x34c5ae;let _0x3bb0ea=_0x2dbb8d[_0x158b62(0x1e4)][_0x158b62(0x1bb)]-0x1;if(_0x2dbb8d[_0x158b62(0x1ab)]){_0x2dbb8d[_0x158b62(0x1e4)]['push'](null);while(_0x3bb0ea>=0x0&&_0xe18ee6[0x0]<_0x2dbb8d[_0x158b62(0x1e4)][_0x3bb0ea][0x0]){_0x2dbb8d['keys'][_0x3bb0ea+0x1]=_0x2dbb8d[_0x158b62(0x1e4)][_0x3bb0ea],_0x3bb0ea--;}_0x2dbb8d[_0x158b62(0x1e4)][_0x3bb0ea+0x1]=_0xe18ee6;}else{while(_0x3bb0ea>=0x0&&_0xe18ee6[0x0]<_0x2dbb8d[_0x158b62(0x1e4)][_0x3bb0ea][0x0]){_0x3bb0ea--;}_0x3bb0ea++,_0x2dbb8d[_0x158b62(0x211)][_0x3bb0ea][_0x158b62(0x1e4)]['length']===this[_0x158b62(0x201)]-0x1&&(this[_0x158b62(0x1da)](_0x2dbb8d,_0x3bb0ea),_0xe18ee6[0x0]>_0x2dbb8d['keys'][_0x3bb0ea][0x0]&&_0x3bb0ea++),this[_0x158b62(0x20c)](_0x2dbb8d[_0x158b62(0x211)][_0x3bb0ea],_0xe18ee6);}}[_0x34c5ae(0x1da)](_0xd831c6,_0x35f299){const _0x355f28=_0x34c5ae;let _0x4bf23f=this['order'],_0x10237b=_0xd831c6[_0x355f28(0x211)][_0x35f299],_0x30800a=new BTreeNode(_0x10237b[_0x355f28(0x1ab)]);_0xd831c6[_0x355f28(0x1e4)][_0x355f28(0x1d8)](_0x35f299,0x0,_0x10237b[_0x355f28(0x1e4)][Math['floor'](_0x4bf23f/0x2)]),_0xd831c6['children'][_0x355f28(0x1d8)](_0x35f299+0x1,0x0,_0x30800a),_0x30800a[_0x355f28(0x1e4)]=_0x10237b['keys'][_0x355f28(0x1d8)](Math[_0x355f28(0x1d5)](_0x4bf23f/0x2)+0x1),!_0x10237b[_0x355f28(0x1ab)]&&(_0x30800a[_0x355f28(0x211)]=_0x10237b[_0x355f28(0x211)][_0x355f28(0x1d8)](Math[_0x355f28(0x1d5)](_0x4bf23f/0x2)+0x1));}[_0x34c5ae(0x19d)](_0x337ec8){const _0x52ab22=_0x34c5ae;let _0x149e81=[];for(let _0x562580=0x0;_0x562580<_0x337ec8[_0x52ab22(0x1e4)][_0x52ab22(0x1bb)];_0x562580++){!_0x337ec8[_0x52ab22(0x1ab)]&&(_0x149e81=_0x149e81['concat'](this[_0x52ab22(0x19d)](_0x337ec8[_0x52ab22(0x211)][_0x562580]))),_0x149e81[_0x52ab22(0x1a3)](_0x337ec8[_0x52ab22(0x1e4)][_0x562580][0x1]);}return!_0x337ec8[_0x52ab22(0x1ab)]&&_0x337ec8[_0x52ab22(0x211)][_0x52ab22(0x1bb)]>_0x337ec8[_0x52ab22(0x1e4)][_0x52ab22(0x1bb)]&&(_0x149e81=_0x149e81['concat'](this['traverse'](_0x337ec8[_0x52ab22(0x211)][_0x337ec8['keys']['length']]))),_0x149e81;}}class QueryResult{constructor(_0x331a21){const _0x111679=_0x34c5ae;this[_0x111679(0x1e2)]=Array[_0x111679(0x1f9)](_0x331a21)?_0x331a21:[];}[_0x34c5ae(0x1ce)](_0x1aa294=0x0,_0x273380=0xa){const _0x51e7f2=_0x34c5ae;return this[_0x51e7f2(0x1e2)][_0x51e7f2(0x1b6)](_0x1aa294,_0x1aa294+_0x273380);}[_0x34c5ae(0x1e5)](){return this['data']['length'];}[_0x34c5ae(0x1f2)](_0x240175){const _0x50c421=_0x34c5ae;return new QueryResult([...this[_0x50c421(0x1e2)]][_0x50c421(0x1f2)](_0x240175));}[_0x34c5ae(0x19f)](){const _0x3991c3=_0x34c5ae;return this[_0x3991c3(0x1e2)];}}function _0x5737(_0x7cce22,_0xd67115){const _0x4095dc=_0x4095();return _0x5737=function(_0x5737fb,_0x48c27a){_0x5737fb=_0x5737fb-0x18c;let _0x5d7bfb=_0x4095dc[_0x5737fb];return _0x5d7bfb;},_0x5737(_0x7cce22,_0xd67115);}class eveloDB{constructor(_0x4f6949={}){const _0x366407=_0x34c5ae;this['config']={...defaultConfig,..._0x4f6949};if(this['config'][_0x366407(0x202)]===_0x366407(0x1f4)&&this['config'][_0x366407(0x1d0)]&&this['config'][_0x366407(0x1ed)])throw new Error('BSON\x20encoding\x20does\x20not\x20support\x20encryption.\x20Please\x20set\x20\x22encryption\x22\x20and\x20\x22encryptionKey\x22\x20to\x20null\x20or\x20use\x20\x22json\x22\x20encoding.');this[_0x366407(0x1ba)]['encode']==='bson'&&(!_0x4f6949[_0x366407(0x1c5)]&&(this[_0x366407(0x1ba)]['extension']=_0x366407(0x1f4)),this['config']['tabspace']=0x0,this[_0x366407(0x1ba)][_0x366407(0x1d0)]=null,this[_0x366407(0x1ba)][_0x366407(0x1ed)]=null);if(this['config'][_0x366407(0x1d0)]){const _0x45c681=this['config'][_0x366407(0x1ed)],_0x102505=this[_0x366407(0x1ba)][_0x366407(0x1d0)];if(!_0x45c681)throw new Error(_0x366407(0x1de));const _0x16543a={'aes-128-cbc':0x20,'aes-192-cbc':0x30,'aes-256-cbc':0x40,'aes-128-gcm':0x20,'aes-256-gcm':0x40},_0x1888f0=_0x16543a[_0x102505];if(!_0x1888f0)throw new Error(_0x366407(0x1df)+_0x102505);if(_0x45c681[_0x366407(0x1bb)]!==_0x1888f0)throw new Error(_0x102505[_0x366407(0x196)]()+_0x366407(0x1c0)+_0x1888f0+'-character\x20hex\x20key\x20('+_0x1888f0/0x2+_0x366407(0x1cf));}this[_0x366407(0x20e)]=new BTree(0x3),!fs['existsSync'](this['config'][_0x366407(0x1b0)])&&fs[_0x366407(0x1fe)](this[_0x366407(0x1ba)][_0x366407(0x1b0)],{'recursive':!![]});}[_0x34c5ae(0x190)](_0xa83bbd){const _0x22acd6=_0x34c5ae;if(this[_0x22acd6(0x1ba)][_0x22acd6(0x202)]===_0x22acd6(0x1f4))return _0xa83bbd;return encrypt(_0xa83bbd,this[_0x22acd6(0x1ba)]['encryption'],this[_0x22acd6(0x1ba)][_0x22acd6(0x1ed)]);}[_0x34c5ae(0x1c8)](_0x56d699){const _0x40ea80=_0x34c5ae;if(this[_0x40ea80(0x1ba)][_0x40ea80(0x202)]===_0x40ea80(0x1f4))return _0x56d699;return decrypt(_0x56d699,this[_0x40ea80(0x1ba)][_0x40ea80(0x1d0)],this[_0x40ea80(0x1ba)]['encryptionKey']);}[_0x34c5ae(0x1dd)](_0x534975){const _0x195b0f=_0x34c5ae;if(this[_0x195b0f(0x1ba)][_0x195b0f(0x202)]===_0x195b0f(0x1f4)){const _0x3e17d3={'db':_0x534975};return BSON['serialize'](_0x3e17d3);}if(this['config'][_0x195b0f(0x202)]===_0x195b0f(0x1b1))return JSON[_0x195b0f(0x1e7)](_0x534975,null,this[_0x195b0f(0x1ba)][_0x195b0f(0x18f)]);return JSON[_0x195b0f(0x1e7)](_0x534975,null,this[_0x195b0f(0x1ba)][_0x195b0f(0x18f)]);}[_0x34c5ae(0x208)](_0x4a8825){const _0x473a40=_0x34c5ae;if(this[_0x473a40(0x1ba)][_0x473a40(0x202)]===_0x473a40(0x1f4)){const {db:_0x4ecf40}=BSON[_0x473a40(0x1d3)](_0x4a8825);return _0x4ecf40;}if(this[_0x473a40(0x1ba)][_0x473a40(0x202)]==='json')return JSON['parse'](_0x4a8825);return JSON['parse'](_0x4a8825);}[_0x34c5ae(0x1f1)](_0x108a2d){const _0x4f7676=_0x34c5ae,_0xe6e540=this[_0x4f7676(0x1ba)]['encode']===_0x4f7676(0x1f4)?fs['readFileSync'](_0x108a2d):fs['readFileSync'](_0x108a2d,_0x4f7676(0x1b7)),_0x3cc111=this[_0x4f7676(0x1ba)][_0x4f7676(0x1d0)]?this[_0x4f7676(0x1c8)](_0xe6e540):this[_0x4f7676(0x208)](_0xe6e540);return _0x3cc111;}[_0x34c5ae(0x1cb)](_0x5f2b88,_0x83e5b){const _0x2fdb5e=_0x34c5ae,_0x261cc7=this[_0x2fdb5e(0x1ba)]['encryption']?this[_0x2fdb5e(0x190)](_0x83e5b):this[_0x2fdb5e(0x1dd)](_0x83e5b);return fs['writeFileSync'](_0x5f2b88,_0x261cc7),!![];}[_0x34c5ae(0x1b5)](_0x2375cc){return generateKey(_0x2375cc);}[_0x34c5ae(0x191)](_0x431dbb){const _0xcf858d=_0x34c5ae;return this[_0xcf858d(0x1ba)][_0xcf858d(0x1b0)]+'/'+_0x431dbb+'.'+this['config'][_0xcf858d(0x1c5)];}[_0x34c5ae(0x1d4)](_0x13ddfa,_0x4e12df){const _0x35c4e5=_0x34c5ae;if(!_0x13ddfa)return{'err':_0x35c4e5(0x212)};if(!_0x4e12df||typeof _0x4e12df!==_0x35c4e5(0x207))return{'err':_0x35c4e5(0x20d)};const _0x3bd330=this[_0x35c4e5(0x191)](_0x13ddfa);let _0x46bbd1=[];if(fs[_0x35c4e5(0x1e8)](_0x3bd330)){_0x46bbd1=this[_0x35c4e5(0x1f1)](_0x3bd330);if(this[_0x35c4e5(0x1ba)]['noRepeat']){const _0xe1c286=_0x46bbd1['some'](_0x5f5061=>{const _0x54f1be=_0x35c4e5;return Object['keys'](_0x4e12df)['every'](_0x1c41e8=>{const _0x20545e=_0x5737;if(_0x1c41e8===_0x20545e(0x1a7))return!![];return deepCompare(_0x5f5061[_0x1c41e8],_0x4e12df[_0x1c41e8]);})&&Object[_0x54f1be(0x1e4)](_0x4e12df)[_0x54f1be(0x210)](_0x31e59d=>_0x31e59d in _0x5f5061);});if(_0xe1c286)return{'err':_0x35c4e5(0x20b),'code':_0x35c4e5(0x216)};}}const _0x3fcb51={..._0x4e12df};let _0x5f1a84;return this[_0x35c4e5(0x1ba)][_0x35c4e5(0x1ac)]&&(_0x5f1a84=typeof this[_0x35c4e5(0x1ba)][_0x35c4e5(0x1ac)]===_0x35c4e5(0x194)&&this[_0x35c4e5(0x1ba)][_0x35c4e5(0x1ac)][_0x35c4e5(0x1bb)]>0x0?this[_0x35c4e5(0x1ba)]['autoPrimaryKey']:_0x35c4e5(0x203),!_0x3fcb51['hasOwnProperty'](_0x5f1a84)&&(_0x3fcb51[_0x5f1a84]=this[_0x35c4e5(0x198)]())),_0x46bbd1['push'](_0x3fcb51),this['writeFileData'](_0x3bd330,_0x46bbd1),_0x3fcb51[_0x35c4e5(0x1f5)]&&this[_0x35c4e5(0x20e)][_0x35c4e5(0x1b4)](_0x3fcb51[_0x35c4e5(0x1f5)],_0x3fcb51),{'success':!![],..._0x5f1a84&&_0x3fcb51[_0x5f1a84]?{[_0x5f1a84]:_0x3fcb51[_0x5f1a84]}:{}};}[_0x34c5ae(0x1d6)](_0x5a5fc0,_0x50a709){const _0x48da8f=_0x34c5ae;if(!_0x5a5fc0)return{'err':_0x48da8f(0x1e9)};if(!_0x50a709)return{'err':'conditions\x20required!'};const _0x27493a=this[_0x48da8f(0x191)](_0x5a5fc0);if(!fs[_0x48da8f(0x1e8)](_0x27493a))return{'err':0x194};let _0x62efc7=this['readFileData'](_0x27493a);const _0x588ff2=_0x62efc7[_0x48da8f(0x1bb)],_0xd9c308=_0x62efc7['filter'](_0x4b6398=>!this[_0x48da8f(0x1b9)](_0x4b6398,_0x50a709)),_0x20e565=_0x588ff2-_0xd9c308[_0x48da8f(0x1bb)];return this['writeFileData'](_0x27493a,_0xd9c308),{'success':!![],'deletedCount':_0x20e565};}[_0x34c5ae(0x1be)](_0x2ead4e,_0xa29f4e){const _0x387112=_0x34c5ae;if(!_0x2ead4e)return{'err':_0x387112(0x1e9)};if(!_0xa29f4e)return{'err':_0x387112(0x19c)};const _0x5bd831=this['getFilePath'](_0x2ead4e);return this[_0x387112(0x1cb)](_0x5bd831,_0xa29f4e),{'success':!![]};}[_0x34c5ae(0x1a1)](_0x2860d8,_0x568505){const _0x3766c0=_0x34c5ae;if(!_0x2860d8)return{'err':_0x3766c0(0x1e9)};if(!_0x568505)return{'err':_0x3766c0(0x19c)};const _0x17c365=this[_0x3766c0(0x191)](_0x2860d8);return this[_0x3766c0(0x1cb)](_0x17c365,_0x568505),{'success':!![]};}[_0x34c5ae(0x204)](_0x29914c,_0x2081c9){const _0x314024=_0x34c5ae;if(!_0x29914c)return{'err':_0x314024(0x1e9)};if(!_0x2081c9)return{'err':_0x314024(0x1c3)};const _0xbe29f4=this['getFilePath'](_0x29914c);if(!fs[_0x314024(0x1e8)](_0xbe29f4))return new QueryResult([]);const _0x146c46=this[_0x314024(0x1f1)](_0xbe29f4),_0x56ba78=_0x146c46['filter'](_0x42a5eb=>this[_0x314024(0x1b9)](_0x42a5eb,_0x2081c9));return new QueryResult(_0x56ba78);}[_0x34c5ae(0x1bd)](_0x4fa4b6,_0x1a0cf0){const _0x103659=_0x34c5ae;if(!_0x4fa4b6)return{'err':'collection\x20required!'};if(!_0x1a0cf0)return{'err':_0x103659(0x1c3)};const _0x303609=this[_0x103659(0x191)](_0x4fa4b6);if(!fs[_0x103659(0x1e8)](_0x303609))return null;const _0x23c944=this['readFileData'](_0x303609);return _0x23c944['find'](_0x1f6f73=>this[_0x103659(0x1b9)](_0x1f6f73,_0x1a0cf0))||null;}[_0x34c5ae(0x195)](_0x499ff3,_0x18f92b){const _0x46af04=_0x34c5ae;if(!_0x499ff3)return{'err':_0x46af04(0x1e9)};if(!_0x18f92b)return{'err':_0x46af04(0x1c3)};const _0x2ee157=this[_0x46af04(0x191)](_0x499ff3);if(!fs[_0x46af04(0x1e8)](_0x2ee157))return new QueryResult([]);const _0x21628c=this[_0x46af04(0x1f1)](_0x2ee157),_0x716472=_0x21628c[_0x46af04(0x1bc)](_0x3f3566=>{const _0x2c2f20=_0x46af04;return Object[_0x2c2f20(0x200)](_0x18f92b)[_0x2c2f20(0x210)](([_0x5e04d4,_0x1ba8f1])=>{const _0x50e668=_0x2c2f20,_0x3254d4=_0x3f3566[_0x5e04d4];if(_0x3254d4===undefined||_0x3254d4===null)return![];if(_0x1ba8f1&&typeof _0x1ba8f1===_0x50e668(0x207)&&_0x1ba8f1[_0x50e668(0x1b8)]){const _0x3e3ff2=_0x1ba8f1['$regex'],_0x31fffb=_0x1ba8f1['$options']||'i',_0x2f36d8=new RegExp(_0x3e3ff2,_0x31fffb);return _0x2f36d8[_0x50e668(0x1f7)](_0x3254d4['toString']());}return _0x3254d4[_0x50e668(0x1fc)]()[_0x50e668(0x19e)]()[_0x50e668(0x20a)](_0x1ba8f1[_0x50e668(0x1fc)]()[_0x50e668(0x19e)]());});});return new QueryResult(_0x716472);}[_0x34c5ae(0x1ea)](_0x2ba162){const _0xd0660b=_0x34c5ae;if(!_0x2ba162)return{'err':'collection\x20required!'};const _0x5970e9=this[_0xd0660b(0x191)](_0x2ba162);if(!fs['existsSync'](_0x5970e9))return new QueryResult(undefined);const _0x6230e6=this[_0xd0660b(0x1f1)](_0x5970e9);return new QueryResult(_0x6230e6);}[_0x34c5ae(0x1ca)](_0x5ef199){const _0x22a7fd=_0x34c5ae;if(!_0x5ef199)return{'err':_0x22a7fd(0x1e9)};const _0x2d4e95=this[_0x22a7fd(0x191)](_0x5ef199);if(!fs['existsSync'](_0x2d4e95))return undefined;const _0x50f7d0=this[_0x22a7fd(0x1f1)](_0x2d4e95);return _0x50f7d0;}[_0x34c5ae(0x1e5)](_0x593e80){const _0x281ccd=_0x34c5ae;if(!_0x593e80)return{'success':![],'err':_0x281ccd(0x1e9)};const _0x36cbae=this[_0x281ccd(0x1ea)](_0x593e80)['all']();if(!_0x36cbae)return{'success':![],'err':_0x281ccd(0x1ef)};if(!Array[_0x281ccd(0x1f9)](_0x36cbae))return{'success':![],'err':_0x281ccd(0x1d7)};return{'success':!![],'count':_0x36cbae[_0x281ccd(0x1bb)]};}['check'](_0x462ed1,_0x2a2e74){const _0x177f4c=_0x34c5ae;if(!_0x462ed1)return{'err':_0x177f4c(0x1e9)};if(!_0x2a2e74)return{'err':'conditions\x20required!'};return this[_0x177f4c(0x204)](_0x462ed1,_0x2a2e74)[_0x177f4c(0x19f)]()[_0x177f4c(0x1bb)]>0x0;}['edit'](_0x409b49,_0x2b7caa,_0x51639b){const _0x3c1e62=_0x34c5ae;if(!_0x409b49)return{'err':_0x3c1e62(0x212)};if(!_0x2b7caa)return{'err':_0x3c1e62(0x1eb)};if(!_0x51639b)return{'err':'New\x20data\x20required'};const _0xbc57ac=this['getFilePath'](_0x409b49);if(!fs[_0x3c1e62(0x1e8)](_0xbc57ac))return{'err':_0x3c1e62(0x1ef),'code':0x194};let _0x569dc5=this[_0x3c1e62(0x1f1)](_0xbc57ac),_0x197ed4=0x0,_0x468eb0=![];const _0x1ee727=_0x569dc5[_0x3c1e62(0x209)](_0x77d2b9=>{const _0x46da56=_0x3c1e62;if(this['matchesConditions'](_0x77d2b9,_0x2b7caa)){const _0x4428b1={..._0x77d2b9,..._0x51639b};if(this[_0x46da56(0x1ba)][_0x46da56(0x1c9)]){const _0x1487ca=_0x569dc5[_0x46da56(0x1e0)](_0x53b3a3=>{const _0x5aa283=_0x46da56;if(_0x53b3a3[_0x5aa283(0x1a7)]&&_0x77d2b9[_0x5aa283(0x1a7)]&&_0x53b3a3[_0x5aa283(0x1a7)]===_0x77d2b9[_0x5aa283(0x1a7)])return![];return Object['keys'](_0x51639b)[_0x5aa283(0x210)](_0x1b9639=>{const _0xa2b12b=_0x5aa283;if(_0x1b9639===_0xa2b12b(0x1a7))return![];return deepCompare(_0x53b3a3[_0x1b9639],_0x4428b1[_0x1b9639]);});});if(_0x1487ca)return _0x468eb0=!![],_0x77d2b9;}return _0x197ed4++,_0x4428b1;}return _0x77d2b9;});if(_0x468eb0)return{'err':_0x3c1e62(0x215),'code':_0x3c1e62(0x216)};if(_0x197ed4===0x0)return{'err':_0x3c1e62(0x1f8),'code':_0x3c1e62(0x18c)};return this['writeFileData'](_0xbc57ac,_0x1ee727),{'success':!![],'modifiedCount':_0x197ed4};}['drop'](_0x212d3a){const _0x1636d2=_0x34c5ae;if(!_0x212d3a)return{'err':_0x1636d2(0x1e9)};const _0x18ad4a=this[_0x1636d2(0x191)](_0x212d3a);return fs['existsSync'](_0x18ad4a)?(fs[_0x1636d2(0x1a6)](_0x18ad4a),{'success':!![]}):{'err':0x194};}[_0x34c5ae(0x197)](_0x562c9b){const _0x44fb24=_0x34c5ae;return this[_0x44fb24(0x1b2)](_0x562c9b);}['changeConfig']({from:_0x278772,to:_0x82adb8,collections:_0x4eb0a8}){const _0x4feaf6=_0x34c5ae;if(this[_0x4feaf6(0x1ba)][_0x4feaf6(0x202)]!=='json'&&(_0x278772[_0x4feaf6(0x1d0)]||_0x278772['encryptionKey']||_0x82adb8[_0x4feaf6(0x1d0)]||_0x82adb8['encryptionKey']))throw new Error(_0x4feaf6(0x19a));const _0x2b77a2=require('path'),_0x22401d=fs[_0x4feaf6(0x1ae)](_0x278772[_0x4feaf6(0x1b0)]||this[_0x4feaf6(0x1ba)]['directory']),{encrypt:_0xd738aa,decrypt:_0x4e50b0}=require(_0x4feaf6(0x1f3)),_0x167aaa={'aes-128-cbc':0x20,'aes-192-cbc':0x30,'aes-256-cbc':0x40,'aes-128-gcm':0x20,'aes-256-gcm':0x40},_0x1383b9=(_0x1a3d7d,_0x252f95)=>{const _0x39937b=_0x4feaf6;if(!_0x252f95)return;if(!_0x1a3d7d||_0x1a3d7d[_0x39937b(0x1bb)]!==_0x167aaa[_0x252f95])throw new Error(_0x252f95+'\x20requires\x20'+_0x167aaa[_0x252f95]+_0x39937b(0x1cd));};_0x1383b9(_0x278772[_0x4feaf6(0x1ed)],_0x278772[_0x4feaf6(0x1d0)]),_0x1383b9(_0x82adb8[_0x4feaf6(0x1ed)],_0x82adb8[_0x4feaf6(0x1d0)]);let _0x4c28ce=0x0,_0x27b2d3=0x0;const _0x147294=_0x278772['extension']||this[_0x4feaf6(0x1ba)]['extension'],_0x52fd81=_0x82adb8[_0x4feaf6(0x1c5)]||this[_0x4feaf6(0x1ba)]['extension'],_0x28263a=_0x278772[_0x4feaf6(0x1b0)]||this[_0x4feaf6(0x1ba)][_0x4feaf6(0x1b0)],_0x32af5e=_0x82adb8['directory']||this[_0x4feaf6(0x1ba)][_0x4feaf6(0x1b0)];!fs[_0x4feaf6(0x1e8)](_0x32af5e)&&fs['mkdirSync'](_0x32af5e,{'recursive':!![]});_0x22401d[_0x4feaf6(0x1f6)](_0xd708a7=>{const _0x18b168=_0x4feaf6,_0x5a8da3=_0x2b77a2[_0x18b168(0x1c7)](_0xd708a7)['slice'](0x1),_0x588a61=_0x2b77a2[_0x18b168(0x21a)](_0xd708a7,'.'+_0x5a8da3);if(_0x5a8da3!==_0x147294)return;if(_0x4eb0a8&&!_0x4eb0a8[_0x18b168(0x20a)](_0x588a61))return;const _0x3b0782=_0x2b77a2['join'](_0x28263a,_0xd708a7),_0xdda922=_0x2b77a2[_0x18b168(0x1dc)](_0x32af5e,_0x588a61+'.'+_0x52fd81);try{const _0x11ef5c=fs[_0x18b168(0x217)](_0x3b0782,_0x18b168(0x1b7)),_0x7193e7=_0x278772['encryption']?_0x4e50b0(_0x11ef5c,_0x278772[_0x18b168(0x1d0)],_0x278772[_0x18b168(0x1ed)]):JSON[_0x18b168(0x19b)](_0x11ef5c),_0x50fd65=_0x82adb8[_0x18b168(0x1d0)]?_0xd738aa(_0x7193e7,_0x82adb8[_0x18b168(0x1d0)],_0x82adb8[_0x18b168(0x1ed)]):JSON[_0x18b168(0x1e7)](_0x7193e7,null,0x3);fs['writeFileSync'](_0xdda922,_0x50fd65),_0x4c28ce++,_0x3b0782!==_0xdda922&&fs[_0x18b168(0x1e8)](_0x3b0782)&&fs[_0x18b168(0x1a6)](_0x3b0782);}catch(_0x10f1be){console[_0x18b168(0x1e6)](_0x18b168(0x1a0)+_0xd708a7+':\x20'+_0x10f1be['message']),_0x27b2d3++;}});if(_0x28263a!==_0x32af5e&&fs['existsSync'](_0x28263a)){const _0x2d2034=fs[_0x4feaf6(0x1ae)](_0x28263a);_0x2d2034[_0x4feaf6(0x1bb)]===0x0&&fs[_0x4feaf6(0x1f0)](_0x28263a,{'recursive':!![]});}return{'success':!![],'converted':_0x4c28ce,'failed':_0x27b2d3};}async['analyse']({collection:_0x5e51e6,filter:_0x21e0bc,data:_0x5ecdcf,model:_0x2ea591,apiKey:_0x9006b7,query:_0x10d899}){const _0x8953f2=_0x34c5ae;if(_0x5ecdcf&&!Array[_0x8953f2(0x1f9)](_0x5ecdcf))return{'success':![],'err':_0x8953f2(0x1bf)};if(_0x5ecdcf&&_0x5e51e6)return{'success':![],'err':'Cannot\x20specify\x20collection\x20when\x20data\x20is\x20provided'};if(_0x21e0bc&&typeof _0x21e0bc!=='object')return{'success':![],'err':_0x8953f2(0x1a5)};if(!_0x2ea591)return{'success':![],'err':_0x8953f2(0x218)};if(!_0x9006b7)return{'success':![],'err':'API\x20Key\x20is\x20required'};if(!_0x10d899)return{'success':![],'err':_0x8953f2(0x219)};if(_0x10d899['length']>0x400)return{'success':![],'err':_0x8953f2(0x214)};var _0x186aeb=_0x5ecdcf||this[_0x8953f2(0x1ea)](_0x5e51e6)[_0x8953f2(0x19f)]();_0x21e0bc&&(_0x186aeb=_0x186aeb[_0x8953f2(0x1bc)](_0x362f7c=>this['matchesConditions'](_0x362f7c,_0x21e0bc)));if(_0x186aeb[_0x8953f2(0x1bb)]==0x0)return{'success':![],'err':_0x8953f2(0x1cc)};const _0x363c82=new GoogleGenAI({'apiKey':_0x9006b7}),_0x2c9195='\x0a\x20\x20\x20\x20Analyze\x20the\x20following\x20data\x20array\x20according\x20to\x20the\x20specified\x20conditions.\x0a\x20\x20\x20\x20Return\x20a\x20JSON\x20response\x20with\x20the\x20exact\x20structure\x20shown\x20in\x20the\x20example.\x0a\x0a\x20\x20\x20\x20Example\x20Response\x20Format:\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22indexes\x22:\x20[0,\x202,\x203],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22reason\x22:\x20\x22These\x20items\x20match\x20the\x20criteria\x20because...\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22message\x22:\x20\x22Additional\x20insights\x20about\x20the\x20selection\x22\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20Data\x20to\x20Analyze:\x0a\x20\x20\x20\x20'+JSON[_0x8953f2(0x1e7)](_0x186aeb,null,0x2)+'\x0a\x0a\x20\x20\x20\x20Conditions:\x0a\x20\x20\x20\x20'+_0x10d899+_0x8953f2(0x1fd);try{const _0x224eea=await _0x363c82['models'][_0x8953f2(0x1ad)]({'model':_0x2ea591,'contents':_0x2c9195}),_0x1e1500=_0x224eea[_0x8953f2(0x1ee)],_0x5a1f18=_0x1e1500[_0x8953f2(0x206)](/```json|```/g,'')[_0x8953f2(0x20f)](),_0x51abad=JSON[_0x8953f2(0x19b)](_0x5a1f18);if(!_0x51abad['indexes']||!Array['isArray'](_0x51abad[_0x8953f2(0x1c4)]))throw new Error(_0x8953f2(0x1a9));return{'success':!![],'response':{..._0x51abad,'data':_0x51abad[_0x8953f2(0x1c4)][_0x8953f2(0x209)](_0x25885b=>_0x186aeb[_0x25885b])}};}catch(_0x2e29fd){return console[_0x8953f2(0x1e6)](_0x8953f2(0x205),_0x2e29fd),{'success':![],'err':_0x2e29fd[_0x8953f2(0x18d)]||_0x8953f2(0x1e3)};}}['rebuildBTree'](_0x4f3e4b){const _0x126ee6=_0x34c5ae;if(!_0x4f3e4b)return{'err':_0x126ee6(0x1e9)};const _0x54886a=this[_0x126ee6(0x191)](_0x4f3e4b);if(!fs[_0x126ee6(0x1e8)](_0x54886a))return{'err':0x194};let _0x4c70cf=this['readFileData'](_0x54886a);this[_0x126ee6(0x20e)]=new BTree(0x3),_0x4c70cf[_0x126ee6(0x1f6)](_0xb4d9eb=>{const _0x47579c=_0x126ee6;_0xb4d9eb['token']?this[_0x47579c(0x20e)][_0x47579c(0x1b4)](_0xb4d9eb[_0x47579c(0x1f5)],_0xb4d9eb):console[_0x47579c(0x1e6)]('Item\x20is\x20missing\x20a\x20token:',_0xb4d9eb);});}[_0x34c5ae(0x1b9)](_0x75c8d7,_0x1efbad){const _0x25611d=_0x34c5ae;return Object[_0x25611d(0x200)](_0x1efbad)[_0x25611d(0x210)](([_0x376cef,_0xe7595e])=>{const _0x2338dc=_0x25611d,_0xa6b170=_0x75c8d7[_0x376cef];if(typeof _0xe7595e===_0x2338dc(0x207)&&_0xe7595e!==null&&!Array[_0x2338dc(0x1f9)](_0xe7595e))return Object[_0x2338dc(0x200)](_0xe7595e)[_0x2338dc(0x210)](([_0x1a2a72,_0x2668cd])=>{const _0x699a6c=_0x2338dc;switch(_0x1a2a72){case _0x699a6c(0x1b3):return _0xa6b170===_0x2668cd;case _0x699a6c(0x1aa):return _0xa6b170!==_0x2668cd;case'$gt':return _0xa6b170>_0x2668cd;case _0x699a6c(0x199):return _0xa6b170>=_0x2668cd;case _0x699a6c(0x1fb):return _0xa6b170<_0x2668cd;case _0x699a6c(0x1fa):return _0xa6b170<=_0x2668cd;case _0x699a6c(0x1d2):return Array[_0x699a6c(0x1f9)](_0x2668cd)&&_0x2668cd['includes'](_0xa6b170);case _0x699a6c(0x18e):return Array[_0x699a6c(0x1f9)](_0x2668cd)&&!_0x2668cd[_0x699a6c(0x20a)](_0xa6b170);default:return![];}});return _0xa6b170===_0xe7595e;});}[_0x34c5ae(0x1e1)](){const _0x351921=_0x34c5ae;return this[_0x351921(0x20e)]['traverse'](this[_0x351921(0x20e)][_0x351921(0x1c1)]);}[_0x34c5ae(0x198)](){const _0x422fe8=_0x34c5ae;if(this[_0x422fe8(0x1ba)][_0x422fe8(0x202)]===_0x422fe8(0x1f4))return new ObjectId();const _0x1fe558=Date['now']()[_0x422fe8(0x1fc)](0x24),_0x130edb=Math['random']()['toString'](0x24)[_0x422fe8(0x1c6)](0x2,0x8);return _0x1fe558+'-'+_0x130edb;}}module[_0x34c5ae(0x1a4)]=eveloDB;